# ChatGPT Azure Function README
This code contains an Azure Function that receives an HTTP request with a user's question and returns a response generated by a ChatGPT model. The function performs the following steps:

1. Extracts the user's question from the HTTP request.

2. Validates the input question and returns a 406 error if no suitable question is supplied.

3. Logs the user's question.

4. Initializes an Azure Search Client to search for documents related to the user's question.

5. Refines the search request with the Azure Search Config.

6. Prepares the search results to be used as input for the ChatGPT model.

7. Generates a prompt for the ChatGPT model to respond to.

8. Queries the ChatGPT model with the generated prompt.

9. Returns the ChatGPT response in an HTTP response.

Requirements
To run this code, you will need:

Python 3.7 or later
Azure Functions Core Tools
An Azure Search Service with Semantic Search enabled and a Semantic Configuration Created

Configuration
The following environment variables must be set:

OPENAI_KEY: Key to access the ChatGPT API
SEARCH_KEY: Key to connect to Azure Search

Deployment
To deploy this function to Azure Functions, clone this repo and set up Automatic Git integration within Azure Functions. Any merges into the main branch will be automatically deployed to the Azure Functions service.


Usage
To use this function, send an HTTP POST request with the user's question as a query parameter or in the request body.

Example request:


```
POST /api/chatgpt?question=What+is+the+capital+of+France%3F HTTP/1.1
Host: localhost:7071
Example response:
```

```
{
    "answer": "The capital of France is Paris."
}
```
